# todo how to control disable channel - awaiting app update
# todo check if tv width change is also possible with control permission
# todo check if default preset index change does work when tv on off detection is off
# todo check if it works setting authorised user permission if there is no multi pin and pin gets set later (both authorised user and supervisior)
 #TODO test exception text on initialisation (wrong pin, device not found, other err)


# TODO auth cooldown missing



# test services:
authorised user pin change
supervisior pin change

# test entities
authorised user permissions

preset
    name
    distance
    rotation
    selection
    add
    delete

select default preset
freeze position
hdmi detection mode
tv on off detectio
name
disconnect
refresh data
current distance/rotation
tv width



@dataclass
class VogelsMotionMountAuthStatus:
    type: VogelsMotionMountAuthenticationType
    multi_pin_features: VogelsMotionMountMultiPinFeatures
    cooldown: int

    async def _has_write_permission(self, char_uuid: str) -> bool:
        return (
            (char_uuid == CHAR_PRESET_UUIDS and self.multi_pin_features.change_presets)
            or (char_uuid == CHAR_PRESET_NAMES_UUIDS and self.multi_pin_features.change_presets)
            or (char_uuid == CHAR_NAME_UUID and self.multi_pin_features.change_name)
            or (char_uuid == ChAR_DISABLE_CHANNEL and self.multi_pin_features.disable_channel)
            or (char_uuid == CHAR_FREEZE_UUID and self.multi_pin_features.change_tv_on_off_detection)
            or (char_uuid == CHAR_CALIBRATE_UUID and self.multi_pin_features.start_calibration)
            or self.type != VogelsMotionMountAuthenticationType.Wrong
        )